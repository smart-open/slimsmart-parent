# SlimSmart 项目说明文档

> 这是一个10多年的项目，仅供参考

## 1. 项目简介

SlimSmart 是一个基于Spring框架开发的Java Web应用，主要包含微信公众号前端和运营管理后台，提供用户管理、权限控制、系统配置等功能。

## 2. 项目结构

项目采用Maven多模块架构，各模块职责明确，分层设计，便于维护和扩展。

```
slimsmart-parent/
├── slimsmart-common/      # 公共工具类模块
├── slimsmart-model/       # 业务实体类模块
├── slimsmart-api/         # 业务接口定义模块
├── slimsmart-service/     # 业务逻辑实现模块
├── slimsmart-weboss/      # 微信运营后台Web模块
├── slimsmart-wechat/      # 微信公众号前端Web模块
└── slimsmart.sql          # 数据库初始化脚本
```

### 2.1 模块说明

- **slimsmart-common**：提供通用工具类、配置、异常处理等基础设施，被其他所有模块依赖
  - 包含JSON处理、文件操作、日期处理等常用工具类
  - 集成Spring、MyBatis等核心框架

- **slimsmart-model**：定义系统所有业务实体类和数据传输对象
  - 封装数据库表结构对应的实体类
  - 提供数据层与业务层之间的数据传输对象

- **slimsmart-api**：定义业务接口，隔离接口与实现
  - 声明所有业务功能接口
  - 定义服务层的交互规范

- **slimsmart-service**：实现业务逻辑，包含核心业务功能
  - 实现slimsmart-api中定义的接口
  - 处理业务逻辑和数据操作

- **slimsmart-weboss**：微信运营管理后台
  - 提供系统管理、用户管理、权限管理等后台功能
  - 面向系统管理员使用

- **slimsmart-wechat**：微信公众号前端Web应用
  - 面向终端用户的微信公众号相关功能
  - 提供与微信公众号交互的界面

## 3. 技术栈

### 3.1 后端技术
- **基础框架**：Spring Framework 4.1.9.RELEASE
- **ORM框架**：MyBatis 3.2.8
- **数据库**：MySQL 5.1.21
- **构建工具**：Maven
- **日志框架**：SLF4J 1.7.12 + Log4j 1.2.17
- **其他工具**：Jackson、Apache Commons系列、AspectJ等

### 3.2 前端技术
- **视图技术**：JSP 2.2
- **Servlet容器**：兼容Servlet 2.5规范
- **标签库**：JSTL 1.2
- **前端框架**：微信公众号前端相关技术

## 4. 核心功能

### 4.1 用户管理
- 后台用户的增删改查
- 用户登录认证与授权
- 用户状态管理（正常、锁定、注销）

### 4.2 权限管理
- 基于角色的权限控制（RBAC）
- 菜单权限与功能权限管理
- 角色管理与权限分配

### 4.3 系统管理
- 系统参数配置
- 多系统管理
- 操作日志记录

### 4.4 微信公众号相关功能
- 微信公众号接入与消息处理
- 微信用户管理
- 微信相关业务功能

## 5. 数据库设计

系统采用关系型数据库设计，主要包含以下核心表：

- **tb_back_user**：后台用户表
- **tb_role**：角色表
- **tb_perm**：权限资源表
- **tr_user_role**：用户角色关联表
- **tr_role_perm**：角色权限关联表
- **tb_system**：系统信息表
- **tb_params**：系统参数表

默认管理员账号：admin，密码：111111（系统已加密存储）

## 6. 环境配置

项目支持多环境配置，通过Maven Profile管理不同环境的配置文件：

- **dev**：开发环境
- **test**：测试环境
- **prep**：预发布环境
- **prod**：生产环境

各环境配置文件位于各模块的`src/main/filters/{environment}`目录下。

## 7. 打包部署

### 7.1 打包方式

使用Maven命令进行打包，根据目标环境选择对应的profile：

```bash
# 开发环境打包
mvn clean package -Pdev

# 测试环境打包
mvn clean package -Ptest

# 预发布环境打包
mvn clean package -Prep

# 生产环境打包
mvn clean package -Pprod
```

### 7.2 部署说明

1. **数据库准备**
   - 执行`slimsmart.sql`脚本创建数据库和表结构
   - 插入初始数据（包含管理员账号等）

2. **应用部署**
   - 将打包生成的war文件部署到Tomcat等Servlet容器
   - 确保容器支持Servlet 2.5规范
   - 配置容器的上下文路径和端口号

3. **配置文件调整**
   - 根据实际部署环境修改数据库连接配置
   - 调整日志级别和输出路径
   - 配置微信公众号相关参数

## 8. 开发指南

### 8.1 开发环境搭建
- JDK 1.7
- Maven 3.x
- IDE：Eclipse或IntelliJ IDEA
- MySQL 5.1或更高版本

### 8.2 项目导入
- 使用IDE导入Maven项目
- 确保Maven依赖正确下载
- 配置开发环境的数据库连接

### 8.3 代码规范
- 遵循Java编码规范
- 使用Spring注解进行依赖注入
- 业务逻辑实现位于service层
- 数据库操作通过MyBatis实现

## 9. 系统安全

### 9.1 认证与授权
- 基于Spring Security的认证机制
- 细粒度的权限控制
- 密码加密存储

### 9.2 安全建议
- 定期修改管理员密码
- 为不同用户分配适当的角色权限
- 配置HTTPS协议进行数据传输加密

## 10. 常见问题

1. **登录失败**
   - 检查用户名和密码是否正确
   - 确认用户状态是否正常（未锁定或注销）

2. **权限不足**
   - 联系系统管理员分配相应权限
   - 检查当前用户角色是否拥有操作权限

3. **数据库连接失败**
   - 检查数据库服务是否正常运行
   - 确认数据库连接配置是否正确

## 11. 联系方式

如有问题或建议，请联系项目维护人员。

---